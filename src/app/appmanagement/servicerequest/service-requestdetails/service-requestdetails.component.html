<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3">
            <div class="card-form shadow mt-4 pt-0 sideMenu" style="min-height: 313px;">
                <app-side-navbar></app-side-navbar>
            </div>
        </div>
        <ng-template #content let-c="close" let-d="dismiss">
            <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">View PDf</h4>
                <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
            </div>
            <div class="modal-body">
                <div class="file-priview-container">
                    <ngx-extended-pdf-viewer [handTool]="false" [base64Src]="selectedFileB64" [height]="'60vh'"
                        [showHandToolButton]="true">
                    </ngx-extended-pdf-viewer>
                </div>
            </div>
        </ng-template>
        <ng-template #image let-c="close" let-d="dismiss">
            <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Image</h4>
                <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
            </div>
            <div class="modal-body">
                <img height="200px" [src]="imgSource" alt="Image Source">
            </div>
        </ng-template>
        <div class="col-sm-9">
            <div class="card-form shadow mt-4 pt-3 p-4 leftSideContent">
                <div class="row">
                    <div class="col-sm-12">
                        <p class="fw-bold pb-1 mb-1">
                            Service Request : {{rowData[0].subject}}
                            <a class="btn btn-success btn-sm pull-right ms-2" title="Edit" (click)="onEdit()">
                                <i class="fa fa-pencil"></i>
                            </a>
                            <a class="btn btn-warning btn-sm pull-right ms-2" (click)="btnPreviewPdf()"
                                title="View Attachment">
                                <i class="fa fa-paperclip"></i>
                            </a>
                            <a class="btn btn-danger btn-sm pull-right  ms-2" (click)="btnDeleteService()"
                            title="View Attachment">
                            <i class="fa fa-trash"></i>
                        </a>
                        </p>
                        <small class="d-block my-2 text-muted">{{rowData[0].boardName}}</small>
                    </div>
                    <div class="col-sm-12 mt-3">
                        <div class="table-responsive">
                            <table class="table table-bordered table-sm w-100">
                                <tbody>
                                    <tr>
                                        <td class="w-25">Details</td>
                                        <td colspan="3" class="w-75">{{rowData[0].description}}</td>
                                    </tr>
                                    <tr>
                                        <td class="w-25">Current Status</td>
                                        <td class="w-25">{{rowData[0].status}}</td>
                                        <td class="w-25">Priority</td>
                                        <td class="w-25">{{rowData[0].priority}}</td>
                                    </tr>
                                    <tr>
                                        <td>Resolution Date</td>
                                        <td>{{rowData[0].resolutionDate |ddMmYYYYDate}}</td>
                                        <td>Categories</td>
                                        <td>{{rowData[0].requestCategoryIds}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--|ReqIds:mdSection <div class="col-sm-12 text-center">
                        <button class="btn btn-primary me-2">Accept</button>
                        <button class="btn btn-success me-2">Reject</button>
                        <button class="btn btn-danger me-2">Discard</button>
                        <button class="btn btn-warning">Return</button>
                    </div> -->
                </div>
            </div>
            <div *ngIf="Ticketshow" class="card-form shadow mt-4 pt-3 p-4 leftSideContent">
                <div class="row">
                    <div class="col-sm-12">
                        <p class="fw-bold pb-1">Tickets
                            <a (click)="OnAddTicket()" class="btn btn-warning btn-sm pull-right" title="Add Ticket">
                                <i class="fa fa-plus"></i>
                            </a>
                        </p>

                        <div class="table-responsive  mt-3">
                            <table  id="serviceRequestDetailsList" class="table table-bordered table-sm w-100" *ngIf="ticketData.length>0">
                                <thead>
                                    <tr class="bg-primary text-white">
                                        <th>Sr.No.</th>
                                        <th>Title</th>
                                        <th>End Date</th>
                                        <th>Request Categories</th>
                                        <th>Assigned To</th>
                                        <th>Assigned From</th>
                                        <th>Progress Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of ticketData let i=index">
                                        <td>{{i+1}}</td>
                                        <td>
                                            <a class="btn btn-link" (click)="showticketDetail(data)">{{data.subject}}
                                            </a>
                                            <sup *ngIf="getHighPriorityIcon(data)">
                                                <i class="fa fa-star text-danger"></i>
                                            </sup>
                                            <sup *ngIf="getMedPriorityIcon(data)">
                                                <i class="fa fa-star text-warning"></i>
                                            </sup>
                                            <sup *ngIf="getLowPriorityIcon(data)">
                                                <i class="fa fa-star text-primary"></i>
                                            </sup>
                                        </td>
                                        <td>{{data.endDate |ddMmYYYYDate}}</td>
                                        <td>{{data.section}}</td>
                                        <td>{{data.assignTo}}</td>
                                        <td>{{data.modifiedBy}}</td>
                                        <td>{{data.description}}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div  *ngIf="ticketData.length==0">
                                <strong  class="w-50 text-center"> No  Records Found</strong>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="remarks.length>0">
                <app-comments [data]="remarks"></app-comments>
            </div>
        </div>
    </div>
</div>